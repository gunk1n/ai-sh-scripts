#!/bin/bash

# Функция для отображения главного меню
show_menu() {
    clear
    echo "==========================================="
    echo " Меню полезных команд Ubuntu 22.04 "
    echo "==========================================="
    echo "1. Системные команды"
    echo "2. Сетевые команды"
    echo "3. Управление пакетами"
    echo "4. Управление файлами"
    echo "5. Мониторинг системы"
    echo "6. Docker"
    echo "7. SSH"
    echo "8. Выход"
    echo "==========================================="
    echo -n "Выберите категорию: "
}

# Функция для отображения системных команд
system_commands() {
    clear
    echo "===================================="
    echo " Системные команды "
    echo "===================================="
    echo "1. Перезагрузить систему"
    echo "2. Выключить систему"
    echo "3. Показать информацию о системе"
    echo "4. Проверить использование диска"
    echo "5. Показать запущенные процессы"
    echo "6. Вернуться в главное меню"
    echo "===================================="
    echo -n "Выберите команду: "
    read choice
    case $choice in
        1) sudo reboot ;;
        2) sudo shutdown -h now ;;
        3) neofetch ;;
        4) df -h ;;
        5) htop ;;
        6) return ;;
        *) echo "Неверный выбор. Попробуйте снова." ;;
    esac
    read -p "Нажмите Enter, чтобы продолжить..."
}

# Функция для отображения сетевых команд
network_commands() {
    clear
    echo "===================================="
    echo " Сетевые команды "
    echo "===================================="
    echo "1. Показать IP-адрес"
    echo "2. Проверить соединение с интернетом"
    echo "3. Показать открытые порты"
    echo "4. Показать сетевые интерфейсы"
    echo "5. Проверить доступность хоста"
    echo "6. Вернуться в главное меню"
    echo "===================================="
    echo -n "Выберите команду: "
    read choice
    case $choice in
        1) ip a ;;
        2) ping -c 4 google.com ;;
        3) sudo netstat -tuln ;;
        4) ifconfig ;;
        5) echo -n "Введите хост: "; read host; ping -c 4 $host ;;
        6) return ;;
        *) echo "Неверный выбор. Попробуйте снова." ;;
    esac
    read -p "Нажмите Enter, чтобы продолжить..."
}

# Функция для отображения команд управления пакетами
package_commands() {
    clear
    echo "===================================="
    echo " Управление пакетами "
    echo "===================================="
    echo "1. Обновить список пакетов"
    echo "2. Установить пакет"
    echo "3. Удалить пакет"
    echo "4. Обновить все пакеты"
    echo "5. Поиск пакета"
    echo "6. Очистить кэш пакетов"
    echo "7. Вернуться в главное меню"
    echo "===================================="
    echo -n "Выберите команду: "
    read choice
    case $choice in
        1) sudo apt update ;;
        2) echo -n "Введите имя пакета: "; read pkg; sudo apt install $pkg ;;
        3) echo -n "Введите имя пакета: "; read pkg; sudo apt remove $pkg ;;
        4) sudo apt upgrade ;;
        5) echo -n "Введите имя пакета для поиска: "; read pkg; apt search $pkg ;;
        6) sudo apt clean ;;
        7) return ;;
        *) echo "Неверный выбор. Попробуйте снова." ;;
    esac
    read -p "Нажмите Enter, чтобы продолжить..."
}

# Функция для отображения команд управления файлами
file_commands() {
    clear
    echo "===================================="
    echo " Управление файлами "
    echo "===================================="
    echo "1. Показать содержимое каталога"
    echo "2. Создать файл"
    echo "3. Удалить файл"
    echo "4. Переименовать файл"
    echo "5. Найти файл"
    echo "6. Показать размер файла/каталога"
    echo "7. Вернуться в главное меню"
    echo "===================================="
    echo -n "Выберите команду: "
    read choice
    case $choice in
        1) echo -n "Введите путь к каталогу: "; read dir; ls -l $dir ;;
        2) echo -n "Введите имя файла: "; read file; touch $file ;;
        3) echo -n "Введите имя файла: "; read file; rm $file ;;
        4) echo -n "Введите старое имя файла: "; read old; echo -n "Введите новое имя файла: "; read new; mv $old $new ;;
        5) echo -n "Введите имя файла для поиска: "; read file; find / -name "$file" ;;
        6) echo -n "Введите путь к файлу/каталогу: "; read path; du -sh $path ;;
        7) return ;;
        *) echo "Неверный выбор. Попробуйте снова." ;;
    esac
    read -p "Нажмите Enter, чтобы продолжить..."
}

# Функция для мониторинга системы
monitoring_commands() {
    clear
    echo "===================================="
    echo " Мониторинг системы "
    echo "===================================="
    echo "1. Показать использование CPU"
    echo "2. Показать использование памяти"
    echo "3. Показать использование диска"
    echo "4. Показать запущенные процессы"
    echo "5. Показать логи системы"
    echo "6. Вернуться в главное меню"
    echo "===================================="
    echo -n "Выберите команду: "
    read choice
    case $choice in
        1) top ;;
        2) free -h ;;
        3) df -h ;;
        4) htop ;;
        5) sudo journalctl -xe ;;
        6) return ;;
        *) echo "Неверный выбор. Попробуйте снова." ;;
    esac
    read -p "Нажмите Enter, чтобы продолжить..."
}

# Функция для работы с Docker
docker_commands() {
    clear
    echo "===================================="
    echo " Docker "
    echo "===================================="
    echo "1. Запустить контейнер"
    echo "2. Остановить контейнер"
    echo "3. Показать запущенные контейнеры"
    echo "4. Показать все контейнеры"
    echo "5. Удалить контейнер"
    echo "6. Показать образы"
    echo "7. Вернуться в главное меню"
    echo "===================================="
    echo -n "Выберите команду: "
    read choice
    case $choice in
        1) echo -n "Введите имя образа: "; read image; docker run -d $image ;;
        2) echo -n "Введите ID контейнера: "; read id; docker stop $id ;;
        3) docker ps ;;
        4) docker ps -a ;;
        5) echo -n "Введите ID контейнера: "; read id; docker rm $id ;;
        6) docker images ;;
        7) return ;;
        *) echo "Неверный выбор. Попробуйте снова." ;;
    esac
    read -p "Нажмите Enter, чтобы продолжить..."
}

# Функция для работы с SSH
ssh_commands() {
    clear
    echo "===================================="
    echo " SSH "
    echo "===================================="
    echo "1. Подключиться к удаленному серверу"
    echo "2. Сгенерировать SSH-ключ"
    echo "3. Скопировать SSH-ключ на сервер"
    echo "4. Проверить SSH-соединение"
    echo "5. Вернуться в главное меню"
    echo "===================================="
    echo -n "Выберите команду: "
    read choice
    case $choice in
        1) echo -n "Введите имя пользователя: "; read user; echo -n "Введите адрес сервера: "; read host; ssh $user@$host ;;
        2) ssh-keygen -t rsa -b 4096 ;;
        3) echo -n "Введите имя пользователя: "; read user; echo -n "Введите адрес сервера: "; read host; ssh-copy-id $user@$host ;;
        4) echo -n "Введите адрес сервера: "; read host; ssh -T $host ;;
        5) return ;;
        *) echo "Неверный выбор. Попробуйте снова." ;;
    esac
    read -p "Нажмите Enter, чтобы продолжить..."
}

# Основной цикл меню
while true; do
    show_menu
    read choice
    case $choice in
        1) system_commands ;;
        2) network_commands ;;
        3) package_commands ;;
        4) file_commands ;;
        5) monitoring_commands ;;
        6) docker_commands ;;
        7) ssh_commands ;;
        8) break ;;
        *) echo "Неверный выбор. Попробуйте снова." ;;
    esac
    read -p "Нажмите Enter, чтобы продолжить..."
done

echo "Выход из меню."